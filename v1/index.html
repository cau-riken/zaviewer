<!DOCTYPE html> 
<html> 
	<head> 
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta http-equiv="cache-control" content="no-cache,no-store " />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="-1" />
		<title>Multimodal 2D Section Viewer</title> 
		<script src="./js/openseadragonAlexEdit.js"></script>
		<script src="./js/openseadragon-viewerinputhook.min.js" type="text/javascript"></script>
		<script src="./js/openseadragon-scalebar.js"></script>
		<script src="./js/openseadragon-filtering.js"></script>
		<script src="./js/raphaelFastEdit.js"></script>
		<script src="./js/raphael-svg-import.js"></script>
		<script type="text/javascript" src="./js/jquery.min.js"></script>
		<script src="./js/jquery.splitter-0.14.0.js"></script>
		<script type="text/javascript" src="./js/jsTree/jstree.min.js"></script>
		<link rel="stylesheet" href="./css/jquery.splitter.css" />
		<link rel="stylesheet" href="./css/ZAViewer.css" />
		<link rel="stylesheet" href="./js/jsTree/themes/default/style.min.css" />
	</head>
	<body>
	<div>
		<div id="sliderPanel" class="sliderPanel sliderPanelShow">
			<div class="navigatorParentClass">
				<div id="navigatorDiv" class="navigatorChildClass"></div>
			</div>
			<div class="sliderGroup">
				<div id="sliderGroup1"></div>
				<div id="sliderGroup2">
					<div class="dataset">
						<div>
							<span>intensity</span>
							<input class="slider" id="intensity_slider" type="range" min="-255" max="255" value="0"/>
						</div>
						<input class="opacity" id="intensity_value" type="text" value="0"/>
					</div>
					<div class="dataset">
						<div>
							<span style="-ms-word-wrap: break-word;">gamma</span>
							<input class="slider" id="gamma_slider" type="range" min="0" max="50" value="10"/>
						</div>
						<input class="opacity" id="gamma_value" type="text" value="0"/>
					</div>
				</div>
			</div>
			<div class="hidebtn">
				<button id="btnHideShow" onclick="hideShow();">Hide delineations</button>
				<button id="editbtn">Edit</button>
				<div id="btnShrinkSliderpanel" onclick="checkSliderPanel();"></div>
			</div>
		</div>
		
		<div id="subviewPanel" class="subviewPanel subviewPanelShow">
			<div id="sagittal_holder" class="sagittalHolder" >
				<div id="sagittal_label" class="sagittalLabel" ></div>
				<img id="sagittal_image" alt="Sagittal view" width="200" height="200"/>
			</div>
			<div id="btnShrinkSubviewpanel" onclick="checkSubviewPanel();"></div>
		</div>
		<div id="posviewPanel">
			<div id="posviewPanel1" class="posviewPanel posTbl">
				<div><div>x ( - Left, + Right)</div><div>:</div><div id="posX">-</div></div>
				<div><div>y ( - Posterior, + Anterior)</div><div>:</div><div id="posY">-</div></div>
				<div><div>z ( - Inferior, + Superior)</div><div>:</div><div id="posZ">-</div></div>
			</div>
			<div id="posviewPanel2" class="posviewPanel">
				<div>
					<div class="posTbl">
						<div><div>P1</div>&nbsp;(<div id="pos1x">-</div>,&nbsp;<div id="pos1y">-</div>)</div>
						<div><div>P2</div>&nbsp;(<div id="pos2x">-</div>,&nbsp;<div id="pos2y">-</div>)</div>
					</div>
					<div id="posDis">Distance:<span id="posdistance"></span>(mm)</div>
					<div id="btnShrinkPosviewpanel" onclick="checkPosviewPanel();"></div>
				</div>
			</div>
		</div>
		<div id="infoPanel">
				<div id="infoPanelText"></div>
				<div id="infoPanelButton">
					<span></span>
					<div id="btnShrinkInfoPanel" onclick="checkInfoPanel();"></div>
				</div>
		</div>
		<div id="layerEditor">
			<div id="GroupName">Image Group Name</div>
			<div id="ImageArea">
				<div id="ImageList">
					<ul>
					</ul>
				</div>
				<div id="LayerList">
					<select size="10">
					</select>
					<div>
						<input type="button" id="layerUp" value="Up">
						<input type="button" id="layerDown" value="Down">
					</div>
					<div id="layerButton2">
						<input type="button" id="layerSubmit" value="Submit">
						<input type="button" id="layerCancel" value="Cancel">
					</div>
				</div>
			</div>
		</div>
<script>
$(window).load(function() {
	$("#infoPanel").css({"left" : $(".vsplitter").css("left")});
	$(this).bind('splitter.resize', function(e) {
		$("#infoPanel").css({"left" : $(".vsplitter").css("left")});
	});
});

$(window).resize(function(){
	var mh = 3000;
	var mw = 3000;
	var topSpace = 0;
	if (window.innerHeight-topSpace < mh)
	{
		mh = window.innerHeight-topSpace;
	}
	if (window.innerWidth < mw)
	{
		$('#widget').width('100%').height(mh).split({orientation:'vertical', limit:200, position:'20%', minheight:'600px'});
	}
	else
	{
		$('#widget').width(mw).height(mh).split({orientation:'vertical', limit:200, position:'20%', minheight:'600px'});
	}
});
	
// Check windows resize
window.onload = windowSizeCheck;
window.onresize = windowSizeCheck;

function windowSizeCheck(){
	//
	if ( window.innerHeight < document.getElementById("infoPanel").clientHeight + 40 ) {
		hideInfoPanel();
	} else {
		showInfoPanel();
	}
	if ( window.innerHeight < document.getElementById("sliderPanel").clientHeight + 266 ) {
		hideSubviewPanel();
	} else {
		showSubviewPanel();
	}
	if ( window.innerHeight < document.getElementById("sliderPanel").clientHeight + 40 ) {
		hideSliderPanel();
	} else {
		showSliderPanel();
	}
	if ( window.innerHeight < document.getElementById("posviewPanel1").clientHeight + 64) {
		hidePosviewPanel();
	} else {
		showPosviewPanel();
	}
	if ( window.innerHeight < document.getElementById("posviewPanel1").clientHeight + 100) {
		hidePosview2Panel();
	} else {
		showPosview2Panel();
	}
}

// Hide/show Slider panel
function checkSliderPanel(){
	var nowClass = document.getElementById("sliderPanel").className;
	if ( nowClass == "sliderPanel sliderPanelShow") {
		hideSliderPanel();
	} else {
		showSliderPanel();
	}
};
// Hide
function hideSliderPanel() {
		document.getElementById("sliderPanel").className="sliderPanel sliderPanelHide";
		document.getElementById("sliderPanel").style.top="-" + ( document.getElementById("sliderPanel").clientHeight - 35 ) + "px";
		document.getElementById("btnShrinkSliderpanel").style.backgroundPosition="left top";
}
// Show
function showSliderPanel() {
		document.getElementById("sliderPanel").className="sliderPanel sliderPanelShow";
		document.getElementById("sliderPanel").style.top="6px";
		document.getElementById("btnShrinkSliderpanel").style.backgroundPosition="left bottom";
}

// Hide/show subview panel
function checkSubviewPanel(){
	var nowClass = document.getElementById("subviewPanel").className;
	if ( nowClass == "subviewPanel subviewPanelShow") {
		hideSubviewPanel();
	} else {
		showSubviewPanel();
	}
};
// Hide
function hideSubviewPanel() {
		document.getElementById("subviewPanel").className="subviewPanel subviewPanelHide";
		document.getElementById("btnShrinkSubviewpanel").style.backgroundPosition="left top";
}
// Show
function showSubviewPanel() {
		document.getElementById("subviewPanel").className="subviewPanel subviewPanelShow";
		document.getElementById("btnShrinkSubviewpanel").style.backgroundPosition="left bottom";
}

// Hide/show info panel
function checkInfoPanel(){
	var nowClass = document.getElementById("infoPanel").className;
	if ( nowClass == "infoPanel infoPanelShow") {
		hideInfoPanel();
	} else {
		showInfoPanel();
	}
};
// Hide
function hideInfoPanel() {
		document.getElementById("infoPanel").className="infoPanel infoPanelHide";
		document.getElementById("infoPanel").style.top="-" + ( document.getElementById("infoPanel").clientHeight - 23 ) + "px";
		document.getElementById("btnShrinkInfoPanel").style.backgroundPosition="left top";
}
// Show
function showInfoPanel() {
		document.getElementById("infoPanel").className="infoPanel infoPanelShow";
		document.getElementById("infoPanel").style.top="6px";
		document.getElementById("btnShrinkInfoPanel").style.backgroundPosition="left bottom";
}

// Hide
function hidePosviewPanel() {
		document.getElementById("posviewPanel").style.top="-" + ( document.getElementById("posviewPanel").clientHeight - 24 ) + "px";
}
// Show
function showPosviewPanel() {
		document.getElementById("posviewPanel").style.top="";
}

// Hide/show Posview panel
function checkPosviewPanel(){
	if ( document.getElementById("posviewPanel2").className == "posviewPanel posviewPanelShow") {
		hidePosview2Panel();
	} else {
		showPosview2Panel();
	}
};
// Hide
function hidePosview2Panel() {
		document.getElementById("posviewPanel2").className="posviewPanel posviewPanelHide";
		document.getElementById("posviewPanel2").style.height="24px";
		//document.getElementById("posDis").style.marginBottom="2px";
		document.getElementById("btnShrinkPosviewpanel").style.backgroundPosition="left top";
}
// Show
function showPosview2Panel() {
		document.getElementById("posviewPanel2").className="posviewPanel posviewPanelShow";
		document.getElementById("posviewPanel2").style.height="";
		//document.getElementById("posDis").style.marginBottom="";
		document.getElementById("btnShrinkPosviewpanel").style.backgroundPosition="left bottom";
}


</script>

<div id="widget">
	<div id="foo">
		<div id="tree_search">
			<div id="region_search_label">Search for a region:</div>
			<div><input autocomplete="off" id="region_search_form" value="Region search" type="text"></div>
		</div>
		<!-- 3 setup a container element -->
		<div id="jstree"></div><!-- end of #jstree --> 
	</div><!-- end of #foo -->
	<div id="bar">
		<div id="openseadragon1" class="openseadragon"></div>
	</div>
</div>
<!-- end of #widget -->
	<script src="./js/alexViewer.js"></script>
	</div>
	</body>
</html>


